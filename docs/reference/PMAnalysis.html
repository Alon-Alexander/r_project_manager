<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Analysis class to manage an analysis folder — PMAnalysis • pm</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Analysis class to manage an analysis folder — PMAnalysis"><meta name="description" content="This object can be used to manage an analysis folder within a project.
Each analysis contains code, outputs, intermediate results, and logs."><meta property="og:description" content="This object can be used to manage an analysis folder within a project.
Each analysis contains code, outputs, intermediate results, and logs."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/file-formats.html">Working with File Formats: Read and Write Operations</a></li>
    <li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started with pm: A Complete Workflow Example</a></li>
    <li><a class="dropdown-item" href="../articles/input-definitions.html">Defining Project Inputs: Different Input Formats for project.yaml</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Analysis class to manage an analysis folder</h1>

      <div class="d-none name"><code>PMAnalysis.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This object can be used to manage an analysis folder within a project.
Each analysis contains code, outputs, intermediate results, and logs.</p>
    </div>


    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>path</code></dt>
<dd><p>Full path to the analysis's folder</p></dd>


<dt><code>name</code></dt>
<dd><p>Name of the analysis (folder name within analyses/)</p></dd>


<dt><code>project_path</code></dt>
<dd><p>Full path to the project's folder (if created from project)</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-PMAnalysis-new"><code>PMAnalysis$new()</code></a></p></li>
<li><p><a href="#method-PMAnalysis-validate"><code>PMAnalysis$validate()</code></a></p></li>
<li><p><a href="#method-PMAnalysis-print"><code>PMAnalysis$print()</code></a></p></li>
<li><p><a href="#method-PMAnalysis-get_artifact"><code>PMAnalysis$get_artifact()</code></a></p></li>
<li><p><a href="#method-PMAnalysis-get_intermediate_artifact"><code>PMAnalysis$get_intermediate_artifact()</code></a></p></li>
<li><p><a href="#method-PMAnalysis-list_outputs"><code>PMAnalysis$list_outputs()</code></a></p></li>
<li><p><a href="#method-PMAnalysis-get_output_path"><code>PMAnalysis$get_output_path()</code></a></p></li>
<li><p><a href="#method-PMAnalysis-clone"><code>PMAnalysis$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-PMAnalysis-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a PMAnalysis object</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/PMAnalysis.html">PMAnalysis</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>project <span class="op">=</span> <span class="cn">NULL</span>, name <span class="op">=</span> <span class="cn">NULL</span>, path <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>project</code></dt>
<dd><p>PMProject object. If provided, creates analysis within that project.</p></dd>


<dt><code>name</code></dt>
<dd><p>Character. Name of the analysis (folder name). Required if project is provided.</p></dd>


<dt><code>path</code></dt>
<dd><p>Character. Full path to the analysis folder. Required if project is not provided.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-PMAnalysis-validate"></a><div class="section">
<h3 id="method-validate-">Method <code>validate()</code><a class="anchor" aria-label="anchor" href="#method-validate-"></a></h3>
<p>Validate the analysis folder.
Makes sure all expected files and folders exist.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PMAnalysis</span><span class="op">$</span><span class="fu">validate</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-PMAnalysis-print"></a><div class="section">
<h3 id="method-print-">Method <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code><a class="anchor" aria-label="anchor" href="#method-print-"></a></h3>
<p>Print method for PMAnalysis</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PMAnalysis</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-PMAnalysis-get_artifact"></a><div class="section">
<h3 id="method-get-artifact-">Method <code>get_artifact()</code><a class="anchor" aria-label="anchor" href="#method-get-artifact-"></a></h3>
<p>Get an artifact (output file) from another analysis by ID.
Searches for files with the given ID (filename without extension) in analysis output directories.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PMAnalysis</span><span class="op">$</span><span class="fu">get_artifact</span><span class="op">(</span><span class="va">id</span>, analysis_name <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>id</code></dt>
<dd><p>Character. The artifact ID (filename without extension).</p></dd>


<dt><code>analysis_name</code></dt>
<dd><p>Character. Optional name of the analysis to search in.
If not provided, uses the current analysis's name. If explicitly set to <code>NULL</code>,
searches all analyses and fails if not exactly one match is found.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>A <code>PMData</code> object with the artifact's ID and path.</p>
</div>
<div class="section">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span><span class="va">folder</span> <span class="op">&lt;-</span> <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">local_tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">pm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pm_create_project.html">pm_create_project</a></span><span class="op">(</span><span class="va">folder</span><span class="op">)</span></span>
<span><span class="va">analysis1</span> <span class="op">&lt;-</span> <span class="va">pm</span><span class="op">$</span><span class="fu">create_analysis</span><span class="op">(</span><span class="st">"data_preparation"</span><span class="op">)</span></span>
<span><span class="va">analysis2</span> <span class="op">&lt;-</span> <span class="va">pm</span><span class="op">$</span><span class="fu">create_analysis</span><span class="op">(</span><span class="st">"modeling"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a test output file in analysis1</span></span>
<span><span class="va">output</span> <span class="op">&lt;-</span> <span class="va">analysis1</span><span class="op">$</span><span class="fu">get_output_path</span><span class="op">(</span><span class="st">"results.csv"</span>, type <span class="op">=</span> <span class="st">"table"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>, <span class="va">output</span><span class="op">$</span><span class="va">path</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get artifact from analysis2 (which gets it from analysis1)</span></span>
<span><span class="va">artifact</span> <span class="op">&lt;-</span> <span class="va">analysis2</span><span class="op">$</span><span class="fu">get_artifact</span><span class="op">(</span><span class="st">"results"</span>, analysis_name <span class="op">=</span> <span class="st">"data_preparation"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get artifact from current analysis (default behavior)</span></span>
<span><span class="va">artifact</span> <span class="op">&lt;-</span> <span class="va">analysis1</span><span class="op">$</span><span class="fu">get_artifact</span><span class="op">(</span><span class="st">"results"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get artifact without specifying analysis (if unique across all analyses)</span></span>
<span><span class="va">artifact</span> <span class="op">&lt;-</span> <span class="va">analysis2</span><span class="op">$</span><span class="fu">get_artifact</span><span class="op">(</span><span class="st">"results"</span>, analysis_name <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-PMAnalysis-get_intermediate_artifact"></a><div class="section">
<h3 id="method-get-intermediate-artifact-">Method <code>get_intermediate_artifact()</code><a class="anchor" aria-label="anchor" href="#method-get-intermediate-artifact-"></a></h3>
<p>Get an intermediate artifact from the current analysis's intermediate folder.
Searches for existing files with the given ID (filename without extension) in the intermediate directory.
If an existing file is found, returns it. If no existing file is found, returns the path
via <code>get_output_path()</code> (the file may not exist yet).</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PMAnalysis</span><span class="op">$</span><span class="fu">get_intermediate_artifact</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>id</code></dt>
<dd><p>Character. The artifact ID (filename without extension).</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>A <code>PMData</code> object with the artifact's ID and path.</p>
</div>
<div class="section">
<h4 id="examples-1">Examples<a class="anchor" aria-label="anchor" href="#examples-1"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span><span class="va">folder</span> <span class="op">&lt;-</span> <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">local_tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">pm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pm_create_project.html">pm_create_project</a></span><span class="op">(</span><span class="va">folder</span><span class="op">)</span></span>
<span><span class="va">analysis</span> <span class="op">&lt;-</span> <span class="va">pm</span><span class="op">$</span><span class="fu">create_analysis</span><span class="op">(</span><span class="st">"data_preparation"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get artifact from current analysis's intermediate folder</span></span>
<span><span class="co"># If file exists, returns it; otherwise returns path for new file</span></span>
<span><span class="va">artifact</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="fu">get_intermediate_artifact</span><span class="op">(</span><span class="st">"temp_data"</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">artifact</span><span class="op">$</span><span class="fu">exists</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">data</span> <span class="op">&lt;-</span> <span class="va">artifact</span><span class="op">$</span><span class="fu">read</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="co"># File doesn't exist yet, can write to it</span></span>
<span>  <span class="va">artifact</span><span class="op">$</span><span class="fu">write</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-PMAnalysis-list_outputs"></a><div class="section">
<h3 id="method-list-outputs-">Method <code>list_outputs()</code><a class="anchor" aria-label="anchor" href="#method-list-outputs-"></a></h3>
<p>List all output files in the analysis.
Returns a list of PMData objects for all files in the outputs or intermediate directory.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PMAnalysis</span><span class="op">$</span><span class="fu">list_outputs</span><span class="op">(</span>intermediate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>intermediate</code></dt>
<dd><p>Logical. If TRUE, lists files in intermediate/ folder; if FALSE, in outputs/ folder.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a></h4>
<p>A list of <code>PMData</code> objects, one for each file found.
Each object has:</p><ul><li><p><code>id</code>: The file name without extension</p></li>
<li><p><code>path</code>: The full absolute path to the file</p></li>
</ul></div>
<div class="section">
<h4 id="examples-2">Examples<a class="anchor" aria-label="anchor" href="#examples-2"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span><span class="va">folder</span> <span class="op">&lt;-</span> <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">local_tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">pm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pm_create_project.html">pm_create_project</a></span><span class="op">(</span><span class="va">folder</span><span class="op">)</span></span>
<span><span class="va">analysis</span> <span class="op">&lt;-</span> <span class="va">pm</span><span class="op">$</span><span class="fu">create_analysis</span><span class="op">(</span><span class="st">"my_analysis"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create some output files</span></span>
<span><span class="va">output1</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="fu">get_output_path</span><span class="op">(</span><span class="st">"results.csv"</span>, type <span class="op">=</span> <span class="st">"table"</span><span class="op">)</span></span>
<span><span class="va">output2</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="fu">get_output_path</span><span class="op">(</span><span class="st">"plot.png"</span>, type <span class="op">=</span> <span class="st">"figure"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># List all outputs</span></span>
<span><span class="va">outputs</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="fu">list_outputs</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">outputs</span><span class="op">)</span>  <span class="co"># Number of output files</span></span>
<span></span>
<span><span class="co"># List intermediate files</span></span>
<span><span class="va">intermediates</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="fu">list_outputs</span><span class="op">(</span>intermediate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-PMAnalysis-get_output_path"></a><div class="section">
<h3 id="method-get-output-path-">Method <code>get_output_path()</code><a class="anchor" aria-label="anchor" href="#method-get-output-path-"></a></h3>
<p>Get output path for a file, returning a PMData object.</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PMAnalysis</span><span class="op">$</span><span class="fu">get_output_path</span><span class="op">(</span><span class="va">name</span>, type <span class="op">=</span> <span class="cn">NULL</span>, intermediate <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>Character. Name of the output file (with or without extension).</p></dd>


<dt><code>type</code></dt>
<dd><p>Character. Optional type of output (table, object, image, figure, parquet, csv).
If provided and name has no extension, an appropriate extension will be added.
If provided and name has an extension, the extension will be validated against the type.</p></dd>


<dt><code>intermediate</code></dt>
<dd><p>Logical. If TRUE, file goes in intermediate/ folder; if FALSE, in outputs/ folder.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-3">Returns<a class="anchor" aria-label="anchor" href="#returns-3"></a></h4>
<p>A <code>PMData</code> object with:</p><ul><li><p><code>id</code>: The file name without extension</p></li>
<li><p><code>path</code>: The full absolute path to the output file</p></li>
</ul></div>
<div class="section">
<h4 id="examples-3">Examples<a class="anchor" aria-label="anchor" href="#examples-3"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span><span class="va">folder</span> <span class="op">&lt;-</span> <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">local_tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">pm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pm_create_project.html">pm_create_project</a></span><span class="op">(</span><span class="va">folder</span><span class="op">)</span></span>
<span><span class="va">analysis</span> <span class="op">&lt;-</span> <span class="va">pm</span><span class="op">$</span><span class="fu">create_analysis</span><span class="op">(</span><span class="st">"my_analysis"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get output path for a CSV file</span></span>
<span><span class="va">output</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="fu">get_output_path</span><span class="op">(</span><span class="st">"results.csv"</span>, type <span class="op">=</span> <span class="st">"table"</span><span class="op">)</span></span>
<span><span class="va">output</span><span class="op">$</span><span class="va">id</span>    <span class="co"># "results"</span></span>
<span><span class="va">output</span><span class="op">$</span><span class="va">path</span>  <span class="co"># full path to results.csv in outputs/</span></span>
<span></span>
<span><span class="co"># Get intermediate path without extension (will add .parquet for table type)</span></span>
<span><span class="va">intermediate</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="fu">get_output_path</span><span class="op">(</span><span class="st">"temp_data"</span>, type <span class="op">=</span> <span class="st">"table"</span>, intermediate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">intermediate</span><span class="op">$</span><span class="va">id</span>    <span class="co"># "temp_data"</span></span>
<span><span class="va">intermediate</span><span class="op">$</span><span class="va">path</span>  <span class="co"># full path to temp_data.parquet in intermediate/</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-PMAnalysis-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">PMAnalysis</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create a project and analysis</span></span></span>
<span class="r-in"><span><span class="va">folder</span> <span class="op">&lt;-</span> <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">local_tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pm</span> <span class="op">&lt;-</span> <span class="fu"><a href="pm_create_project.html">pm_create_project</a></span><span class="op">(</span><span class="va">folder</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a new analysis</span></span></span>
<span class="r-in"><span><span class="va">analysis</span> <span class="op">&lt;-</span> <span class="va">pm</span><span class="op">$</span><span class="fu">create_analysis</span><span class="op">(</span><span class="st">"data_preparation"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">analysis</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> PMAnalysis:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Name: data_preparation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Path: /private/var/folders/0t/mvk3x4hx0pl31l5lcl11krcc0000gn/T/Rtmp1XPAT8/file58a16e96c9f3/analyses/data_preparation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Project: /private/var/folders/0t/mvk3x4hx0pl31l5lcl11krcc0000gn/T/Rtmp1XPAT8/file58a16e96c9f3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load an existing analysis from project</span></span></span>
<span class="r-in"><span><span class="va">analysis</span> <span class="op">&lt;-</span> <span class="va">pm</span><span class="op">$</span><span class="fu">get_analysis</span><span class="op">(</span><span class="st">"data_preparation"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Load an existing analysis from path</span></span></span>
<span class="r-in"><span><span class="va">analysis</span> <span class="op">&lt;-</span> <span class="va">PMAnalysis</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">folder</span>, <span class="st">"analyses"</span>, <span class="st">"data_preparation"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `PMAnalysis$get_artifact`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">folder</span> <span class="op">&lt;-</span> <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">local_tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pm</span> <span class="op">&lt;-</span> <span class="fu"><a href="pm_create_project.html">pm_create_project</a></span><span class="op">(</span><span class="va">folder</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">analysis1</span> <span class="op">&lt;-</span> <span class="va">pm</span><span class="op">$</span><span class="fu">create_analysis</span><span class="op">(</span><span class="st">"data_preparation"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">analysis2</span> <span class="op">&lt;-</span> <span class="va">pm</span><span class="op">$</span><span class="fu">create_analysis</span><span class="op">(</span><span class="st">"modeling"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a test output file in analysis1</span></span></span>
<span class="r-in"><span><span class="va">output</span> <span class="op">&lt;-</span> <span class="va">analysis1</span><span class="op">$</span><span class="fu">get_output_path</span><span class="op">(</span><span class="st">"results.csv"</span>, type <span class="op">=</span> <span class="st">"table"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>, <span class="va">output</span><span class="op">$</span><span class="va">path</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get artifact from analysis2 (which gets it from analysis1)</span></span></span>
<span class="r-in"><span><span class="va">artifact</span> <span class="op">&lt;-</span> <span class="va">analysis2</span><span class="op">$</span><span class="fu">get_artifact</span><span class="op">(</span><span class="st">"results"</span>, analysis_name <span class="op">=</span> <span class="st">"data_preparation"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get artifact from current analysis (default behavior)</span></span></span>
<span class="r-in"><span><span class="va">artifact</span> <span class="op">&lt;-</span> <span class="va">analysis1</span><span class="op">$</span><span class="fu">get_artifact</span><span class="op">(</span><span class="st">"results"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get artifact without specifying analysis (if unique across all analyses)</span></span></span>
<span class="r-in"><span><span class="va">artifact</span> <span class="op">&lt;-</span> <span class="va">analysis2</span><span class="op">$</span><span class="fu">get_artifact</span><span class="op">(</span><span class="st">"results"</span>, analysis_name <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `PMAnalysis$get_intermediate_artifact`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">folder</span> <span class="op">&lt;-</span> <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">local_tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pm</span> <span class="op">&lt;-</span> <span class="fu"><a href="pm_create_project.html">pm_create_project</a></span><span class="op">(</span><span class="va">folder</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">analysis</span> <span class="op">&lt;-</span> <span class="va">pm</span><span class="op">$</span><span class="fu">create_analysis</span><span class="op">(</span><span class="st">"data_preparation"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get artifact from current analysis's intermediate folder</span></span></span>
<span class="r-in"><span><span class="co"># If file exists, returns it; otherwise returns path for new file</span></span></span>
<span class="r-in"><span><span class="va">artifact</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="fu">get_intermediate_artifact</span><span class="op">(</span><span class="st">"temp_data"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="va">artifact</span><span class="op">$</span><span class="fu">exists</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">data</span> <span class="op">&lt;-</span> <span class="va">artifact</span><span class="op">$</span><span class="fu">read</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="co"># File doesn't exist yet, can write to it</span></span></span>
<span class="r-in"><span>  <span class="va">artifact</span><span class="op">$</span><span class="fu">write</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `PMAnalysis$list_outputs`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">folder</span> <span class="op">&lt;-</span> <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">local_tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pm</span> <span class="op">&lt;-</span> <span class="fu"><a href="pm_create_project.html">pm_create_project</a></span><span class="op">(</span><span class="va">folder</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">analysis</span> <span class="op">&lt;-</span> <span class="va">pm</span><span class="op">$</span><span class="fu">create_analysis</span><span class="op">(</span><span class="st">"my_analysis"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create some output files</span></span></span>
<span class="r-in"><span><span class="va">output1</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="fu">get_output_path</span><span class="op">(</span><span class="st">"results.csv"</span>, type <span class="op">=</span> <span class="st">"table"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">output2</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="fu">get_output_path</span><span class="op">(</span><span class="st">"plot.png"</span>, type <span class="op">=</span> <span class="st">"figure"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># List all outputs</span></span></span>
<span class="r-in"><span><span class="va">outputs</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="fu">list_outputs</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">outputs</span><span class="op">)</span>  <span class="co"># Number of output files</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># List intermediate files</span></span></span>
<span class="r-in"><span><span class="va">intermediates</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="fu">list_outputs</span><span class="op">(</span>intermediate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `PMAnalysis$get_output_path`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">folder</span> <span class="op">&lt;-</span> <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_tempfile.html" class="external-link">local_tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pm</span> <span class="op">&lt;-</span> <span class="fu"><a href="pm_create_project.html">pm_create_project</a></span><span class="op">(</span><span class="va">folder</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">analysis</span> <span class="op">&lt;-</span> <span class="va">pm</span><span class="op">$</span><span class="fu">create_analysis</span><span class="op">(</span><span class="st">"my_analysis"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get output path for a CSV file</span></span></span>
<span class="r-in"><span><span class="va">output</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="fu">get_output_path</span><span class="op">(</span><span class="st">"results.csv"</span>, type <span class="op">=</span> <span class="st">"table"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">output</span><span class="op">$</span><span class="va">id</span>    <span class="co"># "results"</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "results"</span>
<span class="r-in"><span><span class="va">output</span><span class="op">$</span><span class="va">path</span>  <span class="co"># full path to results.csv in outputs/</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/private/var/folders/0t/mvk3x4hx0pl31l5lcl11krcc0000gn/T/Rtmp1XPAT8/file58a13fbc451c/analyses/my_analysis/outputs/results.csv"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get intermediate path without extension (will add .parquet for table type)</span></span></span>
<span class="r-in"><span><span class="va">intermediate</span> <span class="op">&lt;-</span> <span class="va">analysis</span><span class="op">$</span><span class="fu">get_output_path</span><span class="op">(</span><span class="st">"temp_data"</span>, type <span class="op">=</span> <span class="st">"table"</span>, intermediate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">intermediate</span><span class="op">$</span><span class="va">id</span>    <span class="co"># "temp_data"</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "temp_data"</span>
<span class="r-in"><span><span class="va">intermediate</span><span class="op">$</span><span class="va">path</span>  <span class="co"># full path to temp_data.parquet in intermediate/</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/private/var/folders/0t/mvk3x4hx0pl31l5lcl11krcc0000gn/T/Rtmp1XPAT8/file58a13fbc451c/analyses/my_analysis/intermediate/temp_data.parquet"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alon Alexander.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

